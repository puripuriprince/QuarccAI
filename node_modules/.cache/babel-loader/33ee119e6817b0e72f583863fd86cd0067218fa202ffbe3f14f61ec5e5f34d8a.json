{"ast":null,"code":"import React,{createContext,useContext,useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";const AuthContext=/*#__PURE__*/createContext(null);const API_URL='http://174.89.183.183:5000/api';export function AuthProvider(_ref){let{children}=_ref;const[user,setUser]=useState(null);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const signup=async userData=>{setLoading(true);setError(null);try{const response=await fetch(\"\".concat(API_URL,\"/auth/signup\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(userData)});const data=await response.json();if(!response.ok)throw new Error(data.error||'Signup failed');return data;}catch(err){setError(err.message);throw err;}finally{setLoading(false);}};const signin=async credentials=>{setLoading(true);setError(null);try{const response=await fetch(\"\".concat(API_URL,\"/auth/login\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(credentials)});const data=await response.json();if(!response.ok)throw new Error(data.error||'Login failed');setUser(data.user);localStorage.setItem('token',data.token);return data;}catch(err){setError(err.message);throw err;}finally{setLoading(false);}};const signout=()=>{setUser(null);localStorage.removeItem('token');};const queryAI=async query=>{const token=localStorage.getItem('token');try{const response=await fetch(\"\".concat(API_URL,\"/query\"),{method:'POST',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)},body:JSON.stringify({query})});const data=await response.json();if(!response.ok)throw new Error(data.error||'Query failed');return data;}catch(err){setError(err.message);throw err;}};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{user,loading,error,signup,signin,signout,queryAI},children:children});}export const useAuth=()=>useContext(AuthContext);","map":{"version":3,"names":["React","createContext","useContext","useState","jsx","_jsx","AuthContext","API_URL","AuthProvider","_ref","children","user","setUser","loading","setLoading","error","setError","signup","userData","response","fetch","concat","method","headers","body","JSON","stringify","data","json","ok","Error","err","message","signin","credentials","localStorage","setItem","token","signout","removeItem","queryAI","query","getItem","Provider","value","useAuth"],"sources":["C:/Users/lucas/Desktop/CONCORDIA/QUARCC/LAB/react_project_files/src/contexts/AuthContext.jsx"],"sourcesContent":["import React, { createContext, useContext, useState } from 'react';\n\nconst AuthContext = createContext(null);\n\nconst API_URL = 'http://174.89.183.183:5000/api';\n\nexport function AuthProvider({ children }) {\n    const [user, setUser] = useState(null);\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState(null);\n\n    const signup = async (userData) => {\n        setLoading(true);\n        setError(null);\n        try {\n            const response = await fetch(`${API_URL}/auth/signup`, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify(userData),\n            });\n            const data = await response.json();\n            if (!response.ok) throw new Error(data.error || 'Signup failed');\n            return data;\n        } catch (err) {\n            setError(err.message);\n            throw err;\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const signin = async (credentials) => {\n        setLoading(true);\n        setError(null);\n        try {\n            const response = await fetch(`${API_URL}/auth/login`, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify(credentials),\n            });\n            const data = await response.json();\n            if (!response.ok) throw new Error(data.error || 'Login failed');\n            \n            setUser(data.user);\n            localStorage.setItem('token', data.token);\n            return data;\n        } catch (err) {\n            setError(err.message);\n            throw err;\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const signout = () => {\n        setUser(null);\n        localStorage.removeItem('token');\n    };\n\n    const queryAI = async (query) => {\n        const token = localStorage.getItem('token');\n        try {\n            const response = await fetch(`${API_URL}/query`, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization': `Bearer ${token}`\n                },\n                body: JSON.stringify({ query })\n            });\n            const data = await response.json();\n            if (!response.ok) throw new Error(data.error || 'Query failed');\n            return data;\n        } catch (err) {\n            setError(err.message);\n            throw err;\n        }\n    };\n\n    return (\n        <AuthContext.Provider value={{ \n            user, \n            loading, \n            error, \n            signup, \n            signin, \n            signout,\n            queryAI \n        }}>\n            {children}\n        </AuthContext.Provider>\n    );\n}\n\nexport const useAuth = () => useContext(AuthContext); "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}