{"ast":null,"code":"import React,{createContext,useContext,useState}from'react';import{API_URL}from'../config';import{jsx as _jsx}from\"react/jsx-runtime\";const AuthContext=/*#__PURE__*/createContext(null);export function AuthProvider(_ref){let{children}=_ref;const[user,setUser]=useState(null);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const signup=async userData=>{setLoading(true);setError(null);try{const response=await fetch(\"\".concat(API_URL,\"/api/auth/signup\"),{method:'POST',headers:{'Content-Type':'application/json'},credentials:'include',body:JSON.stringify(userData)});const data=await response.json();if(!response.ok){console.error('Signup failed:',data);throw new Error(data.error||'Signup failed');}return data;}catch(err){console.error('Signup error:',err);setError(err.message);throw err;}finally{setLoading(false);}};const signin=async credentials=>{setLoading(true);setError(null);try{const response=await fetch(\"\".concat(API_URL,\"/api/auth/login\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(credentials)});const data=await response.json();if(!response.ok)throw new Error(data.error||'Login failed');setUser(data.user);localStorage.setItem('token',data.token);return data;}catch(err){setError(err.message);throw err;}finally{setLoading(false);}};const signout=()=>{setUser(null);localStorage.removeItem('token');};const queryAI=async query=>{const token=localStorage.getItem('token');try{const response=await fetch(\"\".concat(API_URL,\"/api/query\"),{method:'POST',headers:{'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)},body:JSON.stringify({query})});const data=await response.json();if(!response.ok)throw new Error(data.error||'Query failed');return data;}catch(err){setError(err.message);throw err;}};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{user,loading,error,signup,signin,signout,queryAI},children:children});}export const useAuth=()=>useContext(AuthContext);","map":{"version":3,"names":["React","createContext","useContext","useState","API_URL","jsx","_jsx","AuthContext","AuthProvider","_ref","children","user","setUser","loading","setLoading","error","setError","signup","userData","response","fetch","concat","method","headers","credentials","body","JSON","stringify","data","json","ok","console","Error","err","message","signin","localStorage","setItem","token","signout","removeItem","queryAI","query","getItem","Provider","value","useAuth"],"sources":["C:/Users/lucas/Desktop/CONCORDIA/QUARCC/LAB/react_project_files/src/contexts/AuthContext.jsx"],"sourcesContent":["import React, { createContext, useContext, useState } from 'react';\r\nimport { API_URL } from '../config';\r\n\r\nconst AuthContext = createContext(null);\r\n\r\nexport function AuthProvider({ children }) {\r\n    const [user, setUser] = useState(null);\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState(null);\r\n\r\n    const signup = async (userData) => {\r\n        setLoading(true);\r\n        setError(null);\r\n        try {\r\n            const response = await fetch(`${API_URL}/api/auth/signup`, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                credentials: 'include',\r\n                body: JSON.stringify(userData),\r\n            });\r\n            const data = await response.json();\r\n            if (!response.ok) {\r\n                console.error('Signup failed:', data);\r\n                throw new Error(data.error || 'Signup failed');\r\n            }\r\n            return data;\r\n        } catch (err) {\r\n            console.error('Signup error:', err);\r\n            setError(err.message);\r\n            throw err;\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const signin = async (credentials) => {\r\n        setLoading(true);\r\n        setError(null);\r\n        try {\r\n            const response = await fetch(`${API_URL}/api/auth/login`, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                body: JSON.stringify(credentials),\r\n            });\r\n            const data = await response.json();\r\n            if (!response.ok) throw new Error(data.error || 'Login failed');\r\n            \r\n            setUser(data.user);\r\n            localStorage.setItem('token', data.token);\r\n            return data;\r\n        } catch (err) {\r\n            setError(err.message);\r\n            throw err;\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const signout = () => {\r\n        setUser(null);\r\n        localStorage.removeItem('token');\r\n    };\r\n\r\n    const queryAI = async (query) => {\r\n        const token = localStorage.getItem('token');\r\n        try {\r\n            const response = await fetch(`${API_URL}/api/query`, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'Authorization': `Bearer ${token}`\r\n                },\r\n                body: JSON.stringify({ query })\r\n            });\r\n            const data = await response.json();\r\n            if (!response.ok) throw new Error(data.error || 'Query failed');\r\n            return data;\r\n        } catch (err) {\r\n            setError(err.message);\r\n            throw err;\r\n        }\r\n    };\r\n\r\n    return (\r\n        <AuthContext.Provider value={{ \r\n            user, \r\n            loading, \r\n            error, \r\n            signup, \r\n            signin, \r\n            signout,\r\n            queryAI \r\n        }}>\r\n            {children}\r\n        </AuthContext.Provider>\r\n    );\r\n}\r\n\r\nexport const useAuth = () => useContext(AuthContext); "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}